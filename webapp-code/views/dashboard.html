{% extends "secure.html" %}

{% block content %}

<div class="page-header">
  <h1>Use your keyboard to control the car!</h1>
</div>



<div style="text-align: center">
  <iframe width="1280" height="780"
src="http://www.youtube.com/embed/XGSy3_Czz8k?autoplay=1">
</iframe>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

<script>
var map = {};
$(document).keydown(function(e){
    e = e || event;
    map[e.keyCode] = true;
  }).keyup(function(e){
    if (map[38] && map[40]) {
      $.ajax({
        url: "http://192.168.84.124/cgi-bin/data.py",
        data: {'q': 'Brake' }
      });
    }
    else if (map[37] && map[39]) {
      $.ajax({
         url: "http://192.168.84.124/cgi-bin/data.py",
        data: {'q': 'Brake' }
      });
    }
    else if (map[38] && map[37]){
      $.ajax({
        url: "http://10.30.14.48/cgi-bin/data.py",
        data: {'q': 'UpLeft' }
      });
    }
    else if (map[38] && map[39]){
      $.ajax({
        url: "http://10.30.14.48/cgi-bin/data.py",
        data: {'q': 'UpRight' }
      });
    }
    else if (map[40] && map[37]){
      $.ajax({
        url: "http://10.30.14.48/cgi-bin/data.py",
        data: {'q': 'DownLeft' }
      });
    }
    else if (map[40] && map[39]){
      $.ajax({
        url: "http://10.30.14.48/cgi-bin/data.py",
        data: {'q': 'DownRight' }
      });
    }
    else if (map[38]){
      $.ajax({
         url: "http://10.30.14.48/cgi-bin/data.py",
         data: {'q': 'Up' }
      });
    }
    else if (map[40]) {
      $.ajax({
         url: "http://10.30.14.48/cgi-bin/data.py",
         data: {'q': 'Down' }
      });
    }
    else if (map[37]) {
      $.ajax({
         url: "http://10.30.14.48/cgi-bin/data.py",
         data: {'q': 'Left' }
      });
    }
    else if (map[39]) {
      $.ajax({
         url: "http://10.30.14.48/cgi-bin/data.py",
         data: {'q': 'Right' }
      });
    }
    map[e.keyCode] = false;
  });
</script>
{% endblock %}
